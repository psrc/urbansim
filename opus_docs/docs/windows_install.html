<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html>
 
<head>
<title>Installing on Windows</title>
<link href="style/book.css" rel="stylesheet" type="text/css"> 
<meta name="Microsoft Border" content="none, default">
</head>

<body><!-- HEAD BANNER BEGINS HERE :: to be placed immediately below body tag -->
  <table border="0" width="100%" cellspacing="0">
    <tr>
      <td><a href="http://www.urbansim.org/"><img border="0" src="images/new-logo-medium.gif" width="105" height="45" /></a></td>
    </tr>
    <tr>
      <td width="100%" colspan="2" class="breadcrumbbox" bgcolor="#EEEEEE"><a href="index.shtml">Opus</a>
        &gt; <a href="install.html"> Installing</a> &gt; Installing on Windows</td>
    </tr>
  </table>
<!-- HEAD BANNER ENDS HERE -->
<h1>Installing Opus &amp; UrbanSim on Windows</h1>

<p>This following instructions are for installing Opus &amp; UrbanSim on
Windows.&nbsp; These installation directions have been tested with Windows XP
and Intel processors. </p>
<ol>
  <li><a href="#python">Install Python and Python libraries</a></li>
  <li><a href="#mysql">Install MySQL</a></li>
  <li><a href="#opus">Install Opus and UrbanSim</a></li>
  <li><a href="#create_package">Create a workspace for your own Opus package</a></li>
  <li><a href="#environment">Define Environment Variables for Opus and UrbanSim</a></li>
  <li><a href="#test">Test your installation</a></li>
  <li>(optional) <a href="#dev">
Set up your software development environment</a></li>
</ol>
<h2>Step 1: <a name="python">Installing Python</a></h2>
<p>Opus and UrbanSim are implemented in Python, making heavy use of numerical
Python packages and other software.&nbsp; Currently, Opus and UrbanSim are known
to work on either Python 2.3.5 or Python 2.4.3.&nbsp; The <a href="http://www.python.org">official
Python website</a> includes documentation, downloads, and much else.</p>
<h3>For Python 2.4.3</h3>
<p>You can either use the Python Enthought Edition to install Python and almost
all of the required Python packages (option #1) or install the individual
packages by hand (option #2).</p>
<h4>Option 1: (recommended)&nbsp;</h4>
<ol>
  <li>Download and install the Python Enthought Edition – Python
    2.4.3 for Windows Enhanced Python Distribution from <a href="http://code.enthought.com/enthon/">http://code.enthought.com/enthon/</a>.&nbsp;
    This will install Python and all of UrbanSim's <i>required</i> Python
    packages, as well as several other useful Python packages.
  </li>
  <li>Upgrade your <b>numpy</b> (<a href="http://numpy.scipy.org/">http://numpy.scipy.org/</a>)
    package to at least version 1.0.1.&nbsp; This is a fast array-processing library used throughout Opus.
  </li>
  <li>Install <b>scipy 0.5.2</b> (<a href="http://www.scipy.org/">http://www.scipy.org/</a>);
    this is an open-source software for mathematics, science, and engineering.&nbsp;
    Opus needs the scipy.ndimage package.&nbsp;&nbsp;<i><br>
    (If you have
    trouble installing scipy you can <a href="scipy.html">install just the
    ndimage packages</a>.)</i></li>
  <li>If you are using MySQL, install <b>MySQL-python 1.2.0</b> (<a href="http://sourceforge.net/projects/mysql-python">http://sourceforge.net/projects/mysql-python</a>).&nbsp;
    This provides our connection from Python to MySQL.</li>
  <li>If you are using R, install <b>RPy</b> (<a href="http://rpy.sourceforge.net/">http://rpy.sourceforge.net/</a>).&nbsp;
    This is a Python interface for the statistical programming language R (tested
    with version 0.4.6).</li>
  <li>If you need to use .dbf files (for example, those produced by ArcGIS), 
      install <b>dbfpy</b> (<a href="http://sourceforge.net/projects/dbfpy">http://sourceforge.net/projects/dbfpy</a>).</li>
</ol>
<h4>Option 2:</h4>
<p>Install everything yourself.&nbsp;&nbsp;</p>
<ol>
  <li>Download and install Python 2.4.3
  </li>
      <li>Download and install the packages from the
        list of <a href="python_packages.html">required, recommended and
        optional Python packages</a>:
  </li>
</ol>
<h3>For Python 2.3.5</h3>
<p><i>(For convenience, we created a single zip file containing the following;
you can download this zip file from <a href="http://www.urbansim.org/download/opus_download.shtml">http://www.urbansim.org/download/opus_download.shtml</a>).</i></p>
<ol>
  <li>Download and install <a href="http://www.python.org/">Python</a> 2.3.5</li>
  <li>Download and install the <a href="python_packages.html">required,
    recommended and optional Python packages</a>.</li>
</ol>
<h2><a name="mysql">Step 2: Installing MySQL</a></h2>
<p>MySQL is an efficient, open-source SQL database. To run UrbanSim you’ll
either need to have a local copy or else run on a shared server.&nbsp;</p>
<p>Opus works with MySQL 4.1 and 5.0.</p>
<ol>
  <li>
  Choose which version of MySQL to use, and download the Windows installer it
  from <a href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>.
  </li>
  <li>Install and configure MySQL via <a href="mysqlinstall.4.1.html">these
    instructions</a>.&nbsp; <i>(Note that the installation and configuration
    steps are identical for MySQL 4.1 and 5.0.)</i>
  </li>
</ol>
<p>MySQL runs as a server. The Windows installer automatically starts this
service and configures it to restart whenever you restart your computer. You
also may start the service from the Windows Services control panel, or from the
command prompt by using the command <font face="Courier New" size="2">net start
mysql</font>, and stop it using <font face="Courier New" size="2">net stop mysql</font>.</p>
<p>In addition to MySQL itself, you might get the <a href="http://www.mysql.com/products/tools/query-browser/">MySQL
Query Browser</a> (for prowling around in UrbanSim databases using a graphical
interface), and the <a href="http://www.mysql.com/products/tools/administrator/">MySQL
Administrator</a>. These are both available as binaries. Both software packages
are contained in SuSe Linux 10.0.</p>
<h2>Step 3: <a name="opus">Installing Opus and UrbanSim</a></h2>
<p>Download the Windows installer file from the “Windows” link on <a href="http://www.urbansim.org/download/index.shtml">http://www.urbansim.org/download/index.shtml</a>.
    To install, simply open the program and follow the instructions. It will
    automatically put the contents in Python’s ‘sitepackages’ directory.</p>
<h2>Step 4: <a name="create_package">Creating your own Opus package</a></h2>
<p>Follow <a href="create_opus_package.html">these instructions</a> to create an
Opus package in which you can place your own code.&nbsp;&nbsp;</p>
<h2>Step 5: <a name="environment">Defining Environment Variables</a>&nbsp;</h2>
<p>UrbanSim requires the following four environment variables.&nbsp; The first
three describe how to connect to MySQL.&nbsp; The last describes how to find the
Python code.</p>
<ul>
  <li><b>MYSQLHOSTNAMEFORTESTS</b> - This environment variable is only used
    for running unit tests that use MySQL. These tests use the MySQL database
	hostname described by this environment variable.  If this environment
	variable is not defined, unit tests that expect this database server
	will not run, but will instead print a warning message.</li>
  <li><b>MYSQLHOSTNAME</b> - The name of the MySQL server. Use <font face="Courier New" size="2">localhost</font>
    for the MySQL server on the same computer.&nbsp;</li>
  <li><b>MYSQLUSERNAME</b> - This should have the MySQL user name to be used for
    querying the UrbanSim database.&nbsp; In the lab, we use the MySQL username “urbansim”
    as a convenient way to allow sharing scripts among all the lab members.&nbsp;
    (Note that MySQL user names are independent of login names.)&nbsp;</li>
  <li><b>MYSQLPASSWORD</b> - The password for the MySQL user name given
    above.&nbsp;</li>
  <li><b>PYTHONPATH</b> - This environment variable tells Python where to look
    for files outside of Python’s ‘site-packages’ directory (which is the
    default location for Python installers).&nbsp; Change PYTHONPATH to include the
    path to the directory containing your ‘workspace’, e.g. ‘C:/workspace’.&nbsp;
    In addition, if you install Opus to somewhere other than Python’s ‘site-packages’
    directory (which is the default location for Python installers) you will
    need to the add that directory, e.g. ‘C:/opus_install’, to the
    PYTHONPATH.</li>
</ul>
<p>The following directions illustrate how to set the MYSQLHOSTNAME environment
variable on Windows:</p>
<ol>
  <li>Open the control panel by going to <b>Start</b> &gt; <b>Control Panel</b>.&nbsp;</li>
  <li>Double click the icon labeled <b>System</b>. If you can’t see the System
    icon double click on the link labeled Switch to Classic View under the menu
    labeled Control Panel on the left pane, and then double click on the icon
    labeled System.&nbsp;</li>
  <li>Choose the <b>Advanced</b> tab, and press the button at the bottom of the
    panel labeled <b>Environment Variables</b>.&nbsp;</li>
  <li>Add or edit the variable called MYSQLHOSTNAME in the list labeled <b>User
    Variables</b>. (But see below for more on User Variables vs. System
    Variables.)&nbsp;</li>
  <li>Select <b>OK</b> to create the variable.&nbsp;</li>
</ol>
<p>User variables versus System variables.&nbsp; Environment variables on
Windows come in two flavors: user variables and system variables.&nbsp; (There
are two separate sections in the “Environment Variables” control panel, one
for User Variables and the other for System Variables.)&nbsp; User variables
apply only to the current user login; system variables apply to all logins on
that machine.&nbsp; If there is a variable of the same name in both, the user
variable overrides the system variable.&nbsp;</p>
<p>So, for the Opus environment variables, if you are running on a personal
machine, it doesn’t matter whether you employ a user variable or a system
variable.&nbsp; If you are running on a shared machine, and are installing a
personal copy of Opus, employ a user variable; that way others can have their
own copy of Opus and you won’t interfere with each other. And if you are
running on a shared machine and are setting up an installation for lots of users
of the machine, employ a system variable.</p>
<p>One final wrinkle: the installer for some Python-based tools (in particular
the FWTools build of OpenEv) will add a directory to the PYTHONPATH system
variable.&nbsp; If you also have a user variable named PYTHONPATH, this will
override the system variable — so copy the information from the system
variable, add your own directory to it, and define the PYTHONPATH user
variable.&nbsp; And of course, if you have already installed Opus and later
install some other Python-based tool that does this, you may need to edit your
user variable appropriately.</p>
<h2>Step 6: <a name="test">Test your installation</a></h2>
<p>Follow <a href="test_install.html">these instructions</a> to test your
installation.</p>
<h2>Step 7: <a name="dev">(optional)
Set up your development environment</a></h2>

<p>If you plan to be editing code in one or more Opus packages, including your
own package(s), follow <a href="developer_setup.html">these instructions</a> to setup your
softare development environment.</p>

</body>
</html>