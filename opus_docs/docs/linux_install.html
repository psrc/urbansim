<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>


  <title>Installing on Linux</title>
  <link href="style/book.css" rel="stylesheet" type="text/css">
 
  <meta name="Microsoft Border" content="none, default">
</head>

 
<body>
<!-- HEAD BANNER BEGINS HERE :: to be placed immediately below body tag -->
  
<table border="0" cellspacing="0" width="100%">

    <tbody>
    <tr>

      <td><a href="http://www.urbansim.org/"><img src="images/new-logo-medium.gif" border="0" height="45" width="105"></a></td>

    </tr>

    <tr>

      <td colspan="2" class="breadcrumbbox" bgcolor="#eeeeee" width="100%"><a href="index.shtml">Opus</a>
        &gt; <a href="install.html"> Installing</a> &gt; Installing on Linux</td>

    </tr>

  
  </tbody>
</table>

<!-- HEAD BANNER ENDS HERE -->
<h1>Installing Opus &amp; UrbanSim on Linux</h1>


<p>This following instructions are for installing Opus &amp; UrbanSim on Linux.&nbsp;
These installation directions have been tested with SuSe Linux and Intel
processors. </p>

<ol>

  <li><a href="#python">Install Python and Python libraries</a></li>

  <li><a href="#mysql">Install MySQL</a></li>

  <li><a href="#opus">Install Opus and UrbanSim</a></li>
  <li><a href="#environment">Define Environment Variables for Opus and UrbanSim</a></li>

  <li><a href="#test">Test your installation</a></li>

  <li>(optional)&nbsp;<a href="mac_install.html#create_package">Creating your own Opus package</a><a href="#dev"></a></li>

</ol>

<h2>Step 1: <a name="python">Installing Python</a></h2>

<p>Opus and UrbanSim are implemented in Python, making heavy use of numerical
Python packages and other software.&nbsp;&nbsp;For Linux we recommend using
Python version 2.4.4; but some folks have also successfully used Python
2.5.&nbsp; The <a href="http://www.python.org">official
Python website</a> includes documentation, downloads, and much else.</p>

<p>In addition, some additional Python libraries are required, recommended, or
optional for use with Opus.&nbsp; You must have the required libraries to run
Opus.&nbsp; The recommended libraries are not necessary to run Opus, but certain
functionality will be unavailable without them.&nbsp; The optional libraries are
Python modules that are needed only in special cases.&nbsp;</p>

<p>Caution! There will be different binaries of these libraries for Python 2.4
and Python 2.5 - make sure you download the correct version for the Python you
are using.</p>

<p>SuSe Linux comes with Python. If it is not installed by the initial
installation, you can install Python using <a href="http://en.opensuse.org/YaST">YaST</a>
or other software manager. Make sure that the python-devel libraries is also
installed on a Linux system.</p>

<p>Download the <a href="python_packages.html">required, recommended and
optional Python packages</a> and then do the following to install each Python
package:</p>

<ol>

  <li>Extract the tar file (e.g. <i>filename</i>) by:</li>

</ol>

<blockquote>
  
  <pre><font face="Courier New" size="2">tar xvfz <i>filename</i></font></pre>

</blockquote>

<ol start="2">

  <li>From the command line, connect to that directory.&nbsp; Follow the
    directions in the unzipped README.&nbsp; Usually, this involves issuing the command:</li>

</ol>

<blockquote>
  
  <pre>sudo python setup.py install</pre>

  
  <p>This will compile the package and install it in the site-packages
  directory. (The &ldquo;sudo&rdquo; part performs the command as the superuser.&nbsp;
  You&rsquo;ll probably need superuser permissions to install into site-packages.)<br>

  <br>

  If you do not have superuser permissions, you need to install python to a
  place where&nbsp; you do have write permission and then use that version of
  python to invoke the setup.py command.&nbsp; For instance, if you installed
  python2.4 to /homes/me/bin/python2.4&nbsp; issuing the following command will
  install the package into the site-packages directory of that version of
  python:</p>

  
  <pre>/homes/me/bin/python2.4 setup.py install</pre>

</blockquote>

<ol start="3">

  <li>If you get complaints about the wrong compiler version, you may need to
    install the appropriate gcc compiler.</li>

</ol>

<h2>Step 2: <a name="mysql">Installing &amp; Configuring MySQL</a></h2>

<p>MySQL is an efficient, open-source SQL database. To run UrbanSim you&rsquo;ll
either need to have a local copy or else run on a shared server.&nbsp;</p>

<p>SuSe 10.0 contains MySQL version 4.1.13; be sure to also install packages
mysql-devel and mysql-shared.&nbsp; If MySQL is not installed, or to install a
different version of MySQL, follow the instructions on <a href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>.&nbsp;&nbsp;</p>

<p>Opus works with MySQL 4.1 and 5.0.</p>

<ol>

  <li>
  Choose which version of MySQL to use, and download the appropriate version it
  from <a href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>.
  </li>

  <li>Install and configure MySQL.</li>

</ol>

<p>MySQL runs as a server.&nbsp; The server can be started from the command line
(read the manual pages for mysqld) or, more conveniently, through a system
manager, such as YaST&rsquo;s System Services (Runlevel).</p>

<p>In addition to MySQL itself, you might get the <a href="http://www.mysql.com/products/tools/query-browser/">MySQL
Query Browser</a> (for prowling around in UrbanSim databases using a graphical
interface), and the <a href="http://www.mysql.com/products/tools/administrator/">MySQL
Administrator</a>. These are both available as binaries. Both software packages
are contained in SuSe Linux 10.0.</p>

<h2>Step 3: <a name="opus">Installing Opus and UrbanSim</a></h2>
<p>There are two options for getting the Opus/UrbanSim code: as a zip
file, or direct from our subversion repository. &nbsp;(For you modeler
types, <a href="http://subversion.tigris.org/">subversion</a>
in this context is the name of a version control system that nicely
manages keeping track of different versions of the code; we're not
talking politics.) &nbsp;Particularly if you will be modifying or
adding to the Opus/Urbansim code, we recommend using subversion.
&nbsp;This will make it easy to update to newer versions of
Opus/UrbanSim and merge in any changes you've made. &nbsp;You can also
request any particular version of the code from subversion.
&nbsp;However, you do have to have a subversion client installed on
your machine.</p>

<p>Here are instructions for each of these options. &nbsp;(Well, actually, we're going to give you two ways
to get Opus and UrbanSim using subversion, depending on whether you are
using the Eclipse IDE. &nbsp;So OK, that's 3 options in all.)</p>
<p>For each of these options, you construct a workspace, called say '~yourusername/workspace'. You'll then need to
add ~yourusername/workspace to your Python path (see <a href="mac_install.html#Step_5:_Defining_Environment_Variables_">Step 4</a>
for how to do this). &nbsp;The workspace will have subdirectories with
the code for opus_core, urbansim, and other packages, and also a file
docs with all of the documentation for that version. &nbsp;The manual
is (where), and the tutorials are (where).</p>

<h3>Option 1: Getting Opus and UrbanSim as a zip file</h3>

This is the simplest option. &nbsp;Browse to our downloads page, and select a zip file for a
stable release. &nbsp;(Probably you want the latest stable release.)
&nbsp;<span style="font-style: italic;">Caution: don't get the 2006
release if you are using these directions! &nbsp;That uses an older set
of instructions on doing an install.</span> &nbsp;Get a 2007 release or later.<br>
<br>
Create a workspace directory, say
'~yourusername/workspace', and unzip the file there.<br>

<br>

<span style="font-weight: bold;">Hint</span>: if you find yourself
starting to edit the source code in any of the packages you downloaded,
stop, delete the workspace directory, and get the code using subversion
instead. &nbsp;You'll have a much easier time later if you update your
code.
<h3>Option 2: Getting Opus and UrbanSim using a command line interface to subversion</h3>

<p>First, make sure you have a subversion client installed. &nbsp;If not, you can get one from <a href="http://subversion.tigris.org/project_packages.html">http://subversion.tigris.org/project_packages.html</a>. &nbsp;Next, in a shell (i.e. a terminal window), type the following commands:</p>
<pre>mkdir workspace<br>cd workspace<br>svn checkout https://trondheim.cs.washington.edu/svn/opus/opus_core<br>svn checkout https://trondheim.cs.washington.edu/svn/opus/urbansim<br>svn checkout https://trondheim.cs.washington.edu/svn/opus/eugene</pre>
<p>You can also get all of the Opus and UrbanSim packages using these
commands instead, but only do this if you have a fast internet
connection and enough disk space (since there will be a lot of data).</p>
<pre>mkdir workspace<br>cd workspace<br>svn checkout https://trondheim.cs.washington.edu/svn/opus</pre>
<h3>Option 3: Getting Opus and UrbanSim using subversion and Eclipse</h3>
This is the best option if you'll be doing software development. &nbsp;See <a href="ide_setup.html">Installing Opus and UrbanSim using an IDE</a> for details.
<h2>Step 4: <a name="environment">Defining Environment Variables</a>&nbsp;</h2>

<p>UrbanSim requires the following four environment variables.&nbsp; The first
three describe how to connect to MySQL.&nbsp; The last describes how to find the
Python code.</p>

<ul>

  <li><b>MYSQLHOSTNAMEFORTESTS</b> - This environment variable is only used
    for running unit tests that use MySQL. These tests use the MySQL database
	hostname described by this environment variable.  If this environment
	variable is not defined, unit tests that expect this database server
	will not run, but will instead print a warning message.</li>

  <li><b>MYSQLHOSTNAME</b> - The name of the MySQL server. Use <font face="Courier New" size="2">localhost</font>
    for the MySQL server on the same computer.&nbsp;</li>

  <li><b>MYSQLUSERNAME</b> - This should have the MySQL user name to be used for
    querying the UrbanSim database. In the lab, we use the MySQL username &ldquo;urbansim&rdquo;
    as a convenient way to allow sharing scripts among all the lab members.
    (Note that MySQL user names are independent of login names.)&nbsp;</li>

  <li><b>MYSQLPASSWORD</b> - The password for the MySQL user name given
    above.&nbsp;</li>

  <li><b>PYTHONPATH</b> - This environment variable tells Python where to look
    for files outside of Python&rsquo;s &lsquo;site-packages&rsquo; directory (which is the
    default location for Python installers). Change PYTHONPATH to include the
    path to the directory containing your &lsquo;workspace&rsquo;, e.g. &lsquo;C:/workspace&rsquo;.&nbsp;
    In addition, if you install Opus to somewhere other than Python&rsquo;s &lsquo;site-packages&rsquo;
    directory (which is the default location for Python installers) you will
    need to the add that directory, e.g. &lsquo;C:/opus_install&rsquo;, to the
    PYTHONPATH.</li>

</ul>

<p>The most convenient way is to set the environment variables in your .bashrc/.cshrc
file. The syntax depends on the type of shell you use. For example you would
insert the following lines into .bashrc:</p>

<pre>export MYSQLHOSTNAME=localhost<br>export MYSQLUSERNAME=urbansim<br>export MYSQLPASSWORD=thesecretpassword</pre>

<h2>Step 5: <a name="test">Test your installation</a></h2>

<p>Follow <a href="test_install.html">these instructions</a> to test your
installation.</p>

<h2>Step 6: <a name="dev">(optional) Creating your own Opus package</a></h2>


<p>If you plan to be editing code in one or more Opus packages, including your
own package(s), follow <a href="developer_setup.html">these instructions</a> to setup your
softare development environment.</p>


</body>
</html>
