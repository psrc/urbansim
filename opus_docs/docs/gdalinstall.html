<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html>
 
<head>
<title>UrbanSim GDAL Installation Manual</title>
<link href="style/book.css" rel="stylesheet" type="text/css"> 
<meta name="Microsoft Border" content="none, default">
</head>

<body><!-- HEAD BANNER BEGINS HERE :: to be placed immediately below body tag -->
  <table border="0" width="100%" cellspacing="0">
    <tr>
      <td><a href="http://www.urbansim.org/"><img border="0" src="images/new-logo-medium.gif" width="105" height="45" /></a></td>
    </tr>
    <tr>
      <td width="100%" colspan="2" class="breadcrumbbox" bgcolor="#EEEEEE">GDAL Installation for Windows</td>
    </tr>
  </table>
<!-- HEAD BANNER ENDS HERE -->
<h1>Installing GDAL 1.3.2 for Windows</h1>

<p>This document describes the GDAL 1.3.2 compilation and installation 
process for Windows.</p>

<h2>Contents</h2>

<ul>
	<li><a href="#quick">Quick Installation</a></li>
	<li><a href="#compile">Compiling and Installing GDAL 1.3.2 from Source</a></li>
	<li><a href="#final">Final Steps</a></li>
	<li><a href="#done">Done</a></li>
</ul>



<a name="quick" /><h4>Quick Installation</h4>

<p>If you do not wish to undergo the messy process of compiling GDAL from 
source, we provide a pre-compiled installation binary:</p>

<a href="/download/files/third-party/gdal-python-13.win32-py2.4.exe">gdal-python-13.win32-py2.4.exe</a>

<p>Simply follow the instructions provided in the executable and skip to the 
<a href="#final">Final Steps</a> section. For the more advanced users who wish,
for whatever reason, to compile and install GDAL from source, instructions for
this process are provided in the next section.</p>


<a name="compile" /><h4>Compiling and Installing GDAL 1.3.2 from Souce</h4>

<p>This section outlines the process we used to compile the Geospatial Data 
Abstraction Library (GDAL) and set up the Python bindings. The instructions in
this section are for advanced users who wish to compile and install GDAL from
source. These instructions assume Microsoft Visual Studio 7.</p>

<p>Download the GDAL 1.3.2 source (<strong>gdal132.zip</strong>) from 
<a href="http://www.gdal.org/dl/">http://www.gdal.org/dl/</a>.</p>

<p>Extract the archive into the location of your choice (such as the C:\).</p>

<p>Edit the nmake.opt file and un-comment the line 'HAVE_NUMPY=1'.</p>

<p>Open a command prompt and change directories to the location of the extracted
files.</p>

<p>Locate and execute vcvars32.bat from your Visual Studio 7 installation.</p>

<p>Execute the following three commands:</p>

<pre>nmake /f makefile.vc
nmake /f makefile.vc install
nmake /f makefile.vc devinstall</pre>

<p>Copy <strong>gdal13.dll</strong> into the pymod directory.</p>

<p>Change to the pymod directory:</p>

<p>Create a file called setup.py:</p>

<pre>from distutils.opus_core import setup, Extension

version = '13'
setup (name = "gdal-python", version = version,
    description = "Geospatial Data Abstraction Library: Python Bindings",
    packages = ['gdal'], package_dir = {'gdal': ''},

    ext_modules = [Extension('gdal._gdal',
        sources = ["gdal_wrap.c", "gdalnumeric.cpp", "numpydataset.cpp"],
            include_dirs = ["..\\gcore", "..\\port", "..\\ogr", "..\\alg" ],
            libraries = ["gdal_i"],
            library_dirs = [".."]
            ),
        ],

        data_files = [("", "gdal%s.dll" % version)]
    )</pre>
	
<p>Edit <strong>gdal_py.h</strong>, and place '#define HAVE_NUMPY' before the
line that reads '#ifdef HAVE_NUMPY'.</p>

<p>Edit <strong>makefile.vc</strong>, and change EXTRAFLAGS to 
'-I$(PYDIR)/include -DHAVE_NUMPY'.</p>
	
<p>Finally, execute the following two commands:</p>

<pre>python setup.py build
python setup.py install</pre>

<p>This concludes the compilation and installation of GDAL from source 
section.</p>


<a name="final" /><h4>Final Steps</h4>

<p>Move <strong>_gdal.pyd</strong> from your Python installation's 
Lib/site-packages/gdal folder into your Python installation's DLLs folder.</p>

<p>If it does not already exist, create a blank <strong>__init__.py</strong>
file in your Python installation's Lib/site-packages/gdal folder.</p>



<a name="done" /><h4>Done</h4>

<p>You have completed the installation of GDAL 1.3.2. To test your installation,
run opus_core.opus_gdal. The output should resemble the following:</p>

<pre>.
----------------------------------------------------------------------
Ran 1 test in 0.047s

OK</pre>

<p>If the output is similar to the above, then the GDAL Python bindings have
been successfully installed.</p>

</body>
</html>