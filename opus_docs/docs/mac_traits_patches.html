<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html>
 
<head>
<title>Traits Patches for the Macintosh</title>
<link href="style/book.css" rel="stylesheet" type="text/css"> 
<meta name="Microsoft Border" content="none, default">
</head>

<body><!-- HEAD BANNER BEGINS HERE :: to be placed immediately below body tag -->
  <table border="0" width="100%" cellspacing="0">
    <tr>
      <td><a href="http://www.urbansim.org/"><img border="0" src="images/new-logo-medium.gif" width="105" height="45" /></a></td>
    </tr>
    <tr>
      <td width="100%" colspan="2" class="breadcrumbbox" bgcolor="#EEEEEE"><a href="index.shtml">Opus</a>
        &gt; <a href="install.html"> Installing</a> &gt; <a href="mac_install.html"> Installing on Macintosh</a>
        &gt; Traits Patches</td>
    </tr>
  </table>
<!-- HEAD BANNER ENDS HERE -->
<h1>Traits Patches for the Macintosh</h1>

These patches are for Release 1.1.0 (2006-08-25 18:09) of the Traits source files.  Enthought has
incorporated them into their source code, so if you download the source code from their svn
repository they aren't needed.  (However, the code in the svn repository changes frequently, so if
you want a stable release the Release 1.1.0 version may be preferable.)

<p>Here are the files to patch:</p>
<ul>
  <li>traits/ui/wx/view_application.py&nbsp;</li>
  <li>pyface/dock/dock_sizer.py&nbsp;</li>
  <li>pyface/dock/dock_window.py&nbsp;</li>
  <li>traits/ui/wx/instance_editor.py</li>
  <li>traits/ui/wx/color_trait.py</li>
</ul>
<p>In <b>view_application</b>, make this change
<pre># Redirect output to this file if not None or '' 
redirect_filename = None</pre>

<p>&nbsp;(If <tt>redirect_filename</tt> is set to 'debug.log' wx Python 
will try to put this
file into your site-packages directory, which is typically writable only by a
user with admin priviledges.)</p>

<p>The other patches are only needed if you want to run Traits with the Wing debugger.
The first three are to places where an instance of wx.Size or wx.Point is
used as a tuple.&nbsp; (The existing code usually works, but sometimes gives errors in some
environments when Python thinks that the wx.Size or wx.Point is a 3-tuple -- perhaps the debugger is adding an extra field to the instances.)</p>

<p>In <b>pyface/dock/dock_sizer.py</b>
<pre>calc_min:
            # formerly: dx, dy = self.control.GetBestFittingSize()
            s = self.control.GetBestFittingSize()
            dx = s.GetWidth()
            dy = s.GetHeight()

RecalcSizes:
        x,   y = self.GetPosition().Get()
        dx, dy = self.GetSizeTuple()
        # formerly:
        # x,   y = self.GetPosition()
        # dx, dy = self.GetSize()
</pre>


<p>In <b>dock_window.py</b>
<pre>_size
            dx, dy = self.control.GetSizeTuple()
</pre>

<p>In <b>traits/ui/wx/instance_editor.py</b>
<pre>resynch_editor

            dx, dy = panel.GetSizeTuple()
            # formerly:
            # dx, dy = panel.GetSize()

</pre>

<p>In <b>traits/ui/wx/color_trait.py</b>
<pre>convert_to_color

             # add these two lines:
             if isinstance( value, str ) and value in standard_colors:
                 return wx.NamedColour(value)<br>
            # just before this last line in the method:
            raise TraitError
</pre>

</body>
</html>