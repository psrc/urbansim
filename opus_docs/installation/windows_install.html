<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<title>Installing on Windows</title>
<link href="../style/book.css" rel="stylesheet" type="text/css">
<meta name="Microsoft Border" content="none, default">
</head>

<body>

<!-- HEAD BANNER BEGINS HERE :: to be placed immediately below body tag -->

<table border="0" cellspacing="0" width="100%">

<tbody>


    <tr>


      <td><a href="http://www.urbansim.org/"><img src="images/new-logo-medium.gif" border="0" height="45" width="105"></a></td>


    </tr>


    <tr>

      <td colspan="2" class="breadcrumbbox" bgcolor="#eeeeee" width="100%"><a href="index.html">Installing Opus &amp; UrbanSim</a>
        &gt; Installing on Windows</td>


    </tr>

  </tbody>
</table>




<!-- HEAD BANNER ENDS HERE -->
<h1>Installing Opus &amp; UrbanSim on Windows</h1>

<!-- commenting this out for now until we get a new stable release...
<p>You have two options for installing Opus and UrbanSim on Windows.  The first is to
<a href="windows_install_installer.html">use the Opus installer</a>.  This option is
simpler and is recommended for most users.  The second option is to download and 
install python and all of the relevant packages manually.  To use the installer, go 
to <a href="windows_install_installer.html">the Opus installer page</a> for instructions.
 To install manually, see below.</p>

-->

<p>These following instructions are for installing Opus &amp; UrbanSim on
Windows.&nbsp; These installation directions have been tested with Windows XP
and Intel processors. </p>

<ol>

  <li><a href="#python">Install Python</a></li>

  <li><a href="#libraries">Install Python libraries</a></li>

  <li>(optional) <a href="#mysql">Install MySQL</a></li>

  <li><a href="#opus">Install Opus and UrbanSim</a></li>

  <li><a href="#environment">Define Environment Variables for Opus and UrbanSim</a></li>

  <li><a href="#test">Testing your installation</a></li>

  <li>(optional)&nbsp;<a href="#create_package">Creating your own Opus package</a></li>

</ol>



<h2>Step 1: <a name="python">Installing Python</a></h2>

<p>Opus and UrbanSim are implemented in Python, making heavy use of numerical
Python packages and other software.&nbsp; Currently, Opus and UrbanSim are known
to work on Python 2.5.&nbsp; The <a href="http://www.python.org">official
Python website</a> includes documentation, downloads, and much else.</p>


<h3>For Python 2.5.1</h3>

<p>Download and install the Python 2.5.1 Windows installer from 
<a href="http://www.python.org/download/">http://www.python.org/download/</a>.</p>



<h2> <a name="libraries">Step 2: Installing Python Libraries</h2>

<p>Opus and Urbansim require a number of python packages, and make optional use of 
several others.  Download and install them from the
        list of <a href="python_packages.html">required, recommended and
        optional Python packages</a>.  Many packages have multiple versions.  Be sure
	to pick the ones designed for use with Windows and Python 2.5.1.</p>

<h2>(optional) <a name="mysql">Step 3: Installing MySQL</a></h2>

<p>MySQL is an efficient, open-source SQL database.  You don't need it to run the
basic Eugene tutorial, although for serious use with your own dataset you will want
a database of some sort.  (We are steadily reducing the dependencies on the particular
database used, however, with the goal of allowing Opus and UrbanSim to be used with
any SQL database.)  If you use MySQL you can either have a local copy or run on a shared server.</p>

<p>If you don't install MySQL right away, you can return and install it later if you discover you
need it.</>

<p>Opus works with MySQL 4.1 and 5.0.</p>


<ol>


  <li>
  Choose which version of MySQL to use, and download the Windows installer it
  from <a href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>.
  </li>




  <li>Install and configure MySQL via <a href="mysqlinstall.4.1.html">these
    instructions</a>.&nbsp; <i>(Note that the installation and configuration
    steps are identical for MySQL 4.1 and 5.0.)</i>
  </li>




</ol>




<p>MySQL runs as a server. The Windows installer automatically starts this
service and configures it to restart whenever you restart your computer. You
also may start the service from the Windows Services control panel, or from the
command prompt by using the command <font face="Courier New" size="2">net start
mysql</font>, and stop it using <font face="Courier New" size="2">net stop mysql</font>.</p>




<p>In addition to MySQL itself, you might get the <a href="http://www.mysql.com/products/tools/query-browser/">MySQL
Query Browser</a> (for prowling around in UrbanSim databases using a graphical
interface), and the <a href="http://www.mysql.com/products/tools/administrator/">MySQL
Administrator</a>. These are both available as binaries.</p>



<h2>Step 5: <a name="opus">Installing Opus and UrbanSim</a></h2>


<p>You should download the Opus/Urbansim code directly from our subversion repository. &nbsp;(For you modeler
types, <a href="http://subversion.tigris.org/">subversion</a>
in this context is the name of a version control system that nicely
manages keeping track of different versions of the code; we're not
talking politics.) &nbsp;Using subversion, it is easy to update to newer versions of
Opus/UrbanSim and merge in any changes you've made. &nbsp;You can also
request any particular version of the code from subversion.
&nbsp;However, you do have to have a subversion client installed on
your machine.</p>


<p>Here are two ways to get the code.  For each of these options, you construct a workspace, called say 'c:\opusworkspace'. You'll then need to
add c:\opusworkspace to your Python path (see <a href="mac_install.html#Step_5:_Defining_Environment_Variables_">Step 4</a>
for how to do this). &nbsp;The workspace will have subdirectories with
the code for opus_core, urbansim, and other packages, and also a file
docs with all of the documentation for that version. &nbsp;The manual
is in the subdirectory <i>opus_docs\manual</i> of the opus workspace, and the tutorials are in the <i>tutorials</i> subdirectory.</p>


<h3>Option 1: Getting Opus and UrbanSim using TortiseSVN or command-line subversion client</h3>

<p>The directions for this option are written assuming you're using the <a href="http://tortoisesvn.tigris.org/">TortiseSVN</a>
subversion client -- if you don't have it already, download it by
following the link. &nbsp;(You can use another client if you prefer,
though -- see <a href="http://subversion.tigris.org/project_packages.html">http://subversion.tigris.org/project_packages.html</a> for a list.)</p>

<p>Create a workspace directory, say 'c:\opusworkspace'. &nbsp;In Windows
explorer, open up this directory and right-click in an empty region.
&nbsp;Select 'SVN Checkout ...', and fill in the dialog box.</p>

<p>At this point, you can either get all of the Opus and UrbanSim
packages, or just the ones you need. &nbsp;Getting them all is simpler
but only do
this if you have a fast internet connection and enough disk space
(since there will be a lot of data)</p>

<p>To get them all for 
latest development release, in Windows explorer, open up the workspace directory and right-click in an empty
region. &nbsp;Select 'SVN Checkout ...', and fill in the "URL of repository' field in the dialog box with: '<span style="font-family: monospace;">https://trondheim.cs.washington.edu/svn/opus/trunk/</span>'
(without the quotes). &nbsp;The checkout directory should be already
filled in with your workspace folder. &nbsp;Pick 'OK', and your system
should download all of the Opus/Urbansim packages.</p>

<p>Alternatively, to get just the packages you need, again in Windows
explorer, open up&nbsp;the workspace directory and right-click in an
empty
region. &nbsp;Select 'SVN Checkout ...', and fill in the "URL of
repository' field in the dialog box with: '<span style="font-family: monospace;">https://trondheim.cs.washington.edu/svn/opus/trunk/opus_core/'</span>.
(without the quotes). &nbsp;The checkout directory should be already
filled
in with your workspace folder -- but to this append '\opus_core'.
&nbsp;(So if you used the suggested location for the workspace, the
whole name will be '<span style="font-family: monospace;">c:\opusworkspace\opus_core</span>'.
&nbsp;Pick 'OK', and your system should
download the opus_core package. &nbsp;Do the same thing for the other
packages you need, minimally 'urbansim' and 'eugene'. &nbsp;In other
words, the repository addresses for these three packages are:</p>


<ul>


  <li>https://trondheim.cs.washington.edu/svn/opus/trunk/opus_core</li>


  <li>https://trondheim.cs.washington.edu/svn/opus/trunk/urbansim</li>


  <li>https://trondheim.cs.washington.edu/svn/opus/trunk/eugene</li>


</ul>

<p>Whether you get all of the packages, or just the ones you need, you should end up with a directory structure like this:</p>


<pre>c:\opusworkspace<br>    opus_core<br>    urbansim<br>    eugene<br>    ....</pre>


<p>Later, you can update a package to the latest version from the
repository by right-clicking on its folder and picking 'SVN Update'.</p>


<p>The above commands check out the latest development version of the code -- adjust the URLs 
appropriately to get a stable release.  See <a href="releases.html">Opus Revisions and Releases</a>
for details on this, 
on checking out the development version instead of a stable release, etc.

<h3>Option 3: Getting Opus and UrbanSim using subversion and Eclipse</h3>


This is the best option if you'll be doing software development. &nbsp;See <a href="ide_setup.html">Installing Opus and UrbanSim using an IDE</a> for details.

<h2><a name="environment">Step 4: Defining Environment Variables</a>&nbsp;</h2>

<p>UrbanSim requires the following environment variables.&nbsp; The first
tells the Python interpreter where to find the Opus/UrbanSim code.  The remaining
variables describe how to connect to MySQL -- leave those four out if you aren't
installing MySQL.</p>

<ul>

  <li><b>PYTHONPATH</b> - This environment variable tells Python where to look
    for files outside of Python&rsquo;s &lsquo;site-packages&rsquo; directory (which is the
    default location for Python installers).&nbsp; Change PYTHONPATH to include the
    path to the directory containing your &lsquo;workspace&rsquo;, e.g. &lsquo;c:\opusworkspace&rsquo;.</li>

  <li><b>MYSQLHOSTNAMEFORTESTS</b> - This environment variable is only used
    for running unit tests that use MySQL. These tests use the MySQL database
	hostname described by this environment variable.  If this environment
	variable is not defined, unit tests that expect this database server
	will not run, but will instead print a warning message.</li>

  <li><b>MYSQLHOSTNAME</b> - The name of the MySQL server. Use <font face="Courier New" size="2">localhost</font>
    for the MySQL server on the same computer.&nbsp;</li>

  <li><b>MYSQLUSERNAME</b> - This should have the MySQL user name to be used for
    querying the UrbanSim database.&nbsp; In the lab, we use the MySQL username &ldquo;urbansim&rdquo;
    as a convenient way to allow sharing scripts among all the lab members.&nbsp;
    (Note that MySQL user names are independent of login names.)&nbsp;</li>

  <li><b>MYSQLPASSWORD</b> - The password for the MySQL user name given
    above.&nbsp;</li>
    
    <li><b>OPUS_DATA_PATH</b> - The directory where you store the caches for UrbanSim runs, e.g. &lsquo;c:\urbansim_cache&rsquo;. &nbsp;</li>

</ul>


<p>The following directions illustrate how to set the MYSQLHOSTNAME environment
variable on Windows:</p>




<ol>




  <li>Open the control panel by going to <b>Start</b> &gt; <b>Control Panel</b>.&nbsp;</li>




  <li>Double click the icon labeled <b>System</b>. If you can&rsquo;t see the System
    icon double click on the link labeled Switch to Classic View under the menu
    labeled Control Panel on the left pane, and then double click on the icon
    labeled System.&nbsp;</li>




  <li>Choose the <b>Advanced</b> tab, and press the button at the bottom of the
    panel labeled <b>Environment Variables</b>.&nbsp;</li>




  <li>Add or edit the variable called MYSQLHOSTNAME in the list labeled <b>User
    Variables</b>. (But see below for more on User Variables vs. System
    Variables.)&nbsp;</li>




  <li>Select <b>OK</b> to create the variable.&nbsp;</li>




</ol>




<p><span style="font-weight: bold;">User variables versus System variables</span>.&nbsp; Environment variables on
Windows come in two flavors: user variables and system variables.&nbsp; (There
are two separate sections in the &ldquo;Environment Variables&rdquo; control panel, one
for User Variables and the other for System Variables.)&nbsp; User variables
apply only to the current user login; system variables apply to all logins on
that machine.&nbsp; If there is a variable of the same name in both, the user
variable overrides the system variable.&nbsp;</p>




<p>So, for the Opus environment variables, if you are running on a personal
machine, it doesn&rsquo;t matter whether you employ a user variable or a system
variable.&nbsp; If you are running on a shared machine, and are installing a
personal copy of Opus, employ a user variable; that way others can have their
own copy of Opus and you won&rsquo;t interfere with each other. And if you are
running on a shared machine and are setting up an installation for lots of users
of the machine, employ a system variable.</p>




<p>One final wrinkle: the installer for some Python-based tools (in particular
the FWTools build of OpenEv) will add a directory to the PYTHONPATH system
variable.&nbsp; If you also have a user variable named PYTHONPATH, this will
override the system variable &mdash; so copy the information from the system
variable, add your own directory to it, and define the PYTHONPATH user
variable.&nbsp; And of course, if you have already installed Opus and later
install some other Python-based tool that does this, you may need to edit your
user variable appropriately.</p>




<h2>Step 6: <a name="test">Testing your installation</a></h2>




<p>Follow <a href="test_install.html">these instructions</a> to test your
installation.</p>




<h2>Step 7: <a name="create_package">(optional)
Creating your own Opus package</a></h2>





<p>If you want to create your own Opus package in which to place your code, follow these&nbsp;<a href="create_opus_package.html">instructions to create an Opus package</a>. &nbsp;You don't need to do this though just to run the Eugene tutorial, or otherwise use an existing database.</p>





</body>
</html>
