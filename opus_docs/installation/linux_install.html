<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>


  <title>Installing on Linux</title>
  <link href="../style/book.css" rel="stylesheet" type="text/css">
 
  <meta name="Microsoft Border" content="none, default">
</head>

 
<body>
<!-- HEAD BANNER BEGINS HERE :: to be placed immediately below body tag -->
  
<table border="0" cellspacing="0" width="100%">

    <tbody>
    <tr>

      <td><a href="http://www.urbansim.org/"><img src="images/new-logo-medium.gif" border="0" height="45" width="105"></a></td>

    </tr>

    <tr>

      <td colspan="2" class="breadcrumbbox" bgcolor="#eeeeee" width="100%"><a href="index.html">Installing Opus &amp; UrbanSim</a>
        &gt; Installing on Linux</td>

    </tr>

  
  </tbody>
</table>

<!-- HEAD BANNER ENDS HERE -->
<h1>Installing Opus &amp; UrbanSim on Linux</h1>


<p>This following instructions are for installing Opus &amp; UrbanSim on Linux.&nbsp;
These installation directions have been tested with Ubuntu Linux and Intel
processors. </p>

<ol>

  <li><a href="#python">Install Python and Python libraries</a></li>

  <li>(optional) <a href="#mysql">Install MySQL</a></li>

  <li><a href="#opus">Install Opus and UrbanSim</a></li>
  <li><a href="#environment">Define Environment Variables for Opus and UrbanSim</a></li>

  <li><a href="#test">Test your installation</a></li>

</ol>

<h2>Step 1: <a name="python">Installing Python</a></h2>

<p>Opus and UrbanSim are implemented in Python, making heavy use of numerical
Python packages and other software.&nbsp;&nbsp;For Linux we recommend using
Python version 2.5.1. The <a href="http://www.python.org">official
Python website</a> includes documentation, downloads, and much else.  Depending 
on your distribution, you may also be able to download and install Python using a package 
manager such as Synaptic.</p>

<p>In addition, some additional Python libraries are required, recommended, or
optional for use with Opus.&nbsp; You must have the required libraries to run
Opus.&nbsp; The recommended libraries are not necessary to run Opus, but certain
functionality will be unavailable without them.&nbsp; The optional libraries are
Python modules that are needed only in special cases.&nbsp;</p>

<p>Caution! There will be different binaries of these libraries for Python 2.4
and Python 2.5 - make sure you download the correct version for the Python you
are using.</p>

<p>Download the <a href="python_packages.html">required, recommended and
optional Python packages</a> and install them.  For most packages, you should
 be able to use Easy Install as described on the Python packages page, except
 that in many cases running the commands will require superuser privileges.  Note
 that installing some packages may require you to update your versions of gcc or 
 other compilers.
 
 Alternatively, you can do the following (this may still require compiler updates):</p>
	
<ol>

  <li>Extract the tar file (e.g. <i>filename</i>) by:</li>

</ol>

<blockquote>
  
  <pre><font face="Courier New" size="2">tar xvfz <i>filename</i></font></pre>

</blockquote>

<ol start="2">

  <li>From the command line, connect to that directory.&nbsp; Follow the
    directions in the unzipped README.&nbsp; Usually, this involves issuing the command:</li>

</ol>

<blockquote>
  
  <pre>sudo python setup.py install</pre>

  
  <p>This will compile the package and install it in the site-packages
  directory. (The &ldquo;sudo&rdquo; part performs the command as the superuser.&nbsp;
  You&rsquo;ll probably need superuser permissions to install into site-packages.)<br>

  <br>

  If you do not have superuser permissions, you need to install python to a
  place where&nbsp; you do have write permission and then use that version of
  python to invoke the setup.py command.&nbsp; For instance, if you installed
  python 2.5 to /homes/me/bin/python2.5&nbsp; issuing the following command will
  install the package into the site-packages directory of that version of
  python:</p>

  
  <pre>/homes/me/bin/python2.5 setup.py install</pre>

</blockquote>

<h2>(optional) Step 2: <a name="mysql">Installing &amp; Configuring MySQL</a></h2>

<p>MySQL is an efficient, open-source SQL database.  You don't need it to run the 
basic Eugene tutorial, although for serious use with your own dataset you will want
a database of some sort.  (We are steadily reducing the dependencies on the particular
database used, however, with the goal of allowing Opus and UrbanSim to be used with
any SQL database.)  If you use MySQL you can either have a local copy or run on a shared server.</p>

<p>If you don't install MySQL right away, you can return and install it later if you discover you 
need it.</>

<p>In Ubuntu, you can download MySQL using the Synaptic package manager.  Be sure to also install packages
mysql-devel and mysql-shared.&nbsp; If MySQL is not installed, or to install a
different version of MySQL, follow the instructions on <a href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>.&nbsp;&nbsp;</p>

<p>Opus works with MySQL 4.1 and 5.0.</p>

<ol>

  <li>
  Choose which version of MySQL to use, and download the appropriate version it
  from <a href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>.
  </li>

  <li>Install and configure MySQL.</li>

</ol>

<p>MySQL runs as a server.&nbsp; The server can be started from the command line
(read the manual pages for mysqld) or, more conveniently, through a system
manager, such as YaST&rsquo;s System Services (Runlevel).</p>

<p>In addition to MySQL itself, you might get the <a href="http://www.mysql.com/products/tools/query-browser/">MySQL
Query Browser</a> (for prowling around in UrbanSim databases using a graphical
interface), and the <a href="http://www.mysql.com/products/tools/administrator/">MySQL
Administrator</a>. These are both available as binaries, and may be available through a package
 manager in your version of Linux.</p>

<h2>Step 3: <a name="opus">Installing Opus and UrbanSim</a></h2>

<p>We provide a zip file that includes sample data for Eugene and Seattle projects, template configurations for running simulations 
using these projects, and a directory in which to insert the source code.  
Download the zip file with data for the latest development version 
from <a href="http://www.urbansim.org/download/#latest_dev">this page</a>.
Unzip the file, which will result in a directory called <tt>opus</tt> with various subdirectories.  Put
this directory some convenient place on your local disk. (We suggest putting it in your home directory.)
See <a href="opus_directory_tree.html">Opus Directory Tree</a> for more information on these directories and
sample data.</p>

For the development version, you should check out the
source code directly from our subversion repository. &nbsp;(For you modeler
types, <a href="http://subversion.tigris.org/">subversion</a>
in this context is the name of a version control system that nicely
manages keeping track of different versions of the code; we're not
talking politics.) &nbsp;Using subversion, it is easy to update to newer versions of
Opus/UrbanSim and merge in any changes you've made. &nbsp;You can also
request any particular version of the code from subversion.
&nbsp;However, you do have to have a subversion client installed on
your machine.</p>

<p>Here are two ways to get the code. The source code directory will have subdirectories with
the code for opus_core, urbansim, and other packages, and also a file
docs with all of the documentation for that version. &nbsp;The manual
is in the subdirectory <i>opus_docs/manual</i> of the opus workspace, 
and the tutorials are in the <i>tutorials</i> subdirectory.</p>

<h3>Option 1: Getting Opus and UrbanSim using a command line interface to subversion</h3>

<p>First, make sure you have a subversion client installed. (Most linux distributes already come with one.)  &nbsp;If not, you can get one 
from <a href="http://subversion.tigris.org/project_packages.html">http://subversion.tigris.org/project_packages.html</a>. &nbsp;
Next, in a shell (i.e. a terminal window), type the following commands.  These commands assume you start the shell in
whatever directory holds your <tt>opus</tt> directory.</p>
<pre>
cd opus/src
svn checkout https://trondheim.cs.washington.edu/svn/opus/trunk/opus_core
svn checkout https://trondheim.cs.washington.edu/svn/opus/trunk/urbansim
svn checkout https://trondheim.cs.washington.edu/svn/opus/trunk/urbansim_gridcell
svn checkout https://trondheim.cs.washington.edu/svn/opus/trunk/eugene
svn checkout https://trondheim.cs.washington.edu/svn/opus/trunk/opus_gui
</pre>

<p>This checks out just the minimal set of packages needed for the tutorial.  If you have a fast
connection, you can get all of the Opus packages at once using these commands:
<pre>
cd opus
svn checkout https://trondheim.cs.washington.edu/svn/opus/trunk/ src
</pre>

<p>Notice that this time we are doing the svn checkout one directory level up, and
checking out all the packages into the <tt>src</tt> directory.
      
<p>The above commands check out the latest development version of the code -- adjust the URLs 
appropriately to get a stable release.  See <a href="releases.html">Opus Revisions and Releases</a>
for details on how to do this.</p>

<h3>Option 2: Getting Opus and UrbanSim using subversion and Eclipse</h3>
This is the best option if you'll be doing software development. &nbsp;See <a href="ide_setup.html">Installing Opus and UrbanSim using an IDE</a> for details.<br>

<h2>Step 4: <a name="environment">Defining Environment Variables</a>&nbsp;</h2>

<p>UrbanSim requires the following environment variables.&nbsp; The first
tells the Python interpreter where to find the Opus/UrbanSim code.  
The others tell the system where to find your cached data and configurations.</p>

<ul>

<li><b>PYTHONPATH</b> - This environment variable
tells Python where to look for files outside of Python's
'site-packages' directory (which is the default location for Python
installers). Change PYTHONPATH to include the path to the directory
containing the packages opus_core, urbansim, and so forth, that you downloaded in Step 4, e.g.
<tt>~/opus/src</tt>.
 </li>

<li><b>OPUS_HOME</b> - The Opus home directory (surprise).  This includes subdirectories with
sample data for Eugene and Seattle projects, output from runs, template configurations for running simulations 
using these projects, and probably your source code and documentation.  This is the directory you downloaded from the
zip file and installed in Step 4.  So if you put this unzipped directory just in your home directory, set this variable
to <tt>~/opus</tt>.</li>

<li><b>OPUS_DATA_PATH</b> (optional) - The directory where you keep your sample data and
caches of data for particular runs.  It defaults to the <tt>data</tt> subdirectory under <tt>OPUS_HOME</tt>,
so if you leave the data at the default location from the zip file, don't set this variable.</li>

</ul>

<p>The most convenient way is to set the environment variables in your .bashrc/.cshrc
file. The syntax depends on the type of shell you use. For example you would
insert the following lines into .bashrc:</p>

<pre>export OPUS_HOME=~/opus</pre>

<h2>Step 5: <a name="test">Test your installation</a></h2>

<p>Follow <a href="test_install.html">these instructions</a> to test your
installation.</p>

</body>
</html>
