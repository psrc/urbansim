<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 10">
<meta name=Originator content="Microsoft Word 10">
<link rel=File-List href="index_files/filelist.xml">
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="City"/>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="place"/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>lmwang</o:Author>
  <o:LastAuthor>lmwang</o:LastAuthor>
  <o:Revision>4</o:Revision>
  <o:TotalTime>23</o:TotalTime>
  <o:Created>2007-11-01T21:29:00Z</o:Created>
  <o:LastSaved>2007-11-01T21:52:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>412</o:Words>
  <o:Characters>2355</o:Characters>
  <o:Company>CSE</o:Company>
  <o:Lines>19</o:Lines>
  <o:Paragraphs>5</o:Paragraphs>
  <o:CharactersWithSpaces>2762</o:CharactersWithSpaces>
  <o:Version>10.6830</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:Compatibility>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
@media screen {
.pb { border-top: 1px dashed #C0C0C0; border-bottom: 1px dashed #C0C0C0 }
.writely-comment { font-size: 9pt; line-height: 1.4em; padding: 1px; border: 1px dashed #C0C0C0 }
}
@media print {
.pb { border-top: 0px; border-bottom: 0px }
.writely-comment { display: none }
}
@media screen,print {
.pb { height: 1px }
}
.HIDDENSTYLE
	{paddingRight: 0;
	position:absolute;
	visibility:hidden;
	z-index:1;}
.MISSPELL
	{background-position-x:50%;
	background-position-y:100%;}

 /* Font Definitions */
 @font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimSun;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-believe-normal-left:yes;}
h1
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:16.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h2
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h3
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:3;
	font-size:13.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h4
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:4;
	font-size:12.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h5
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:5;
	font-size:11.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h6
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:6;
	font-size:10.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
p
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;}
address
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	font-style:italic;}
p.hiddenstyle, li.hiddenstyle, div.hiddenstyle
	{mso-style-name:hiddenstyle;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	background:white;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;}
p.misspell, li.misspell, div.misspell
	{mso-style-name:misspell;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;}
p.western, li.western, div.western
	{mso-style-name:western;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";}
</style>
<![endif]--><![if mso 9]>
<style>
p.MsoNormal
	{margin-left:4.5pt;}
</style>
<![endif]><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body bgcolor=white lang=EN-US link=blue vlink=blue style='tab-interval:.5in;
margin-left:4.5pt;margin-top:4.5pt;margin-right:4.5pt;margin-bottom:4.5pt'
revision="dfv7qdvv_1hd57r2:1">

<div class=Section1>

<p class=western align=center style='text-align:center'><b><span
style='font-size:13.5pt'>Instruction for travel model and <span class=SpellE>UrbanSim</span>
interface for </span></b><st1:City><st1:place><b><span style='font-size:13.5pt'>San
  Francisco</span></b></st1:place></st1:City><b><span style='font-size:13.5pt'>
project</span></b></p>

<p class=western align=center style='text-align:center'><o:p>&nbsp;</o:p></p>

<p class=western><br>
1. Check out <span class=SpellE>travel_model</span> package from <span
class=SpellE>svn</span>: <a href="https://trondheim.cs.washington.edu/svn/opus">https://trondheim.cs.washington.edu/svn/opus</a>,
and synchronize <span class=SpellE>sanfrancisco</span> with the repository.</p>

<p class=western><br>
2. We assume travel model program and data are installed in C:\sf_tm. <span
style='mso-spacerun:yes'> </span>There should be a script (executable binary
file or batch file) in this directory, which the interface will call to invoke
travel model. <span style='mso-spacerun:yes'> </span>The interface will create year/<span
class=SpellE>urbansim</span> subdirectories for data exchange.<span
style='mso-spacerun:yes'>  </span>The travel model should write its <span
class=SpellE>travel_data</span> output in <span class=SpellE>csv</span> format to
these subdirectories too.<span style='mso-spacerun:yes'>  </span>By changing travel
model <span class=GramE>configuration(</span>step 6.1), it can be specified to
different places.</p>

<p class=western><o:p>&nbsp;</o:p></p>

<p class=western>3. Make changes to travel model configuration and <span
class=SpellE>urbansim</span> run configuration to fit your environment. </p>

<p class=western style='margin-left:.5in'>1.) Open <span class=SpellE>create_travel_model_configuration.py</span>
in <span class=SpellE>sanfrancisco\travel_model</span> in an editor. This file
contains configuration for travel model not specific to <span class=SpellE>urbansim</span>
runs. <span style='mso-spacerun:yes'> </span>At the beginning, it sets up the
directories to <span class=SpellE>travel_model</span> script. </p>

<p class=western style='margin-left:.5in'>The following section specifies what
variables are transferred between <span class=SpellE>urbansim</span> and travel
model and the name mapping. Theoretically it allows any variables in data
exchange between <span class=SpellE>urbansim</span> and travel model. <span
style='mso-spacerun:yes'> </span>But since we have no information about SF
travel model, the <span class=SpellE>travel_data</span> variables that transfer
from <span class=SpellE>travel_model</span> to <span class=SpellE>UrbanSim</span>
need to be written to a <span class=SpellE>csv</span> file with a header
including <span class=SpellE>from_zone_id</span> and <span class=SpellE>to_zone_id</span>.</p>

<p class=western style='margin-left:.5in'>_<span class=SpellE>add_models</span>
function specifies what steps (models) to run in a travel model cycle. The
names are self-explaining; if for any reason you want to skip a step you can
comment it out. </p>

<p class=western style='margin-left:.5in'>_<span class=SpellE>add_year</span>
function specifies in which years the travel model should and which data
directory to use. </p>

<p class=western style='margin-left:.5in'><o:p>&nbsp;</o:p></p>

<p class=western style='margin-left:.5in'>2.) Open <span class=SpellE>travel_model_only.py</span>
in <span class=SpellE>sanfrancisco\configs</span> in an editor. This is a run
configuration class derived from baseline but only run travel model for two
years; make sure your baseline configuration works. The bottom part of the
configuration adds <span class=SpellE>travel_model_configuration</span> created
by <span class=SpellE>create_travel_model_configuration.py</span> we just
edited to run configuration. We just need to edit the name of the directory
that contains travel model data here. You can add travel model configuration to
the baseline just following <span class=SpellE>baseline_with_travel_model.py</span>.
</p>

<p class=western><o:p>&nbsp;</o:p></p>

<p class=western>4. Start a test run with <span class=SpellE>travel_model_only</span>
configuration. In a command shell, change directory to <span class=SpellE>opus_core</span>\tools
and type the following: </p>

<p class=western><o:p>&nbsp;</o:p></p>

<p class=western style='text-indent:.5in'><span class=GramE>python</span> <span
class=SpellE>start_run.py</span> -c <span class=SpellE>sanfrancisco.configs.travel_model_only</span>
</p>

<p class=western><o:p>&nbsp;</o:p></p>

<p class=western>It computes and passes zonal variables in a text file to
travel model, calls the travel model, and then reads data from travel model output
and writes them to <span class=SpellE>travel_data</span> in <span class=SpellE>cache_directory</span>
of next year. </p>

</div>

</body>

</html>
